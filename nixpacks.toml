# nixpacks.toml â€” configuraciÃ³n personalizada para BitGuard (Vue + Vite)

# ğŸ§± 1ï¸âƒ£ Fase de instalaciÃ³n
# Instala dependencias usando npm.
[phases.install]
cmds = ["npm install --legacy-peer-deps"]

# ğŸ—ï¸ 2ï¸âƒ£ Fase de build
# Genera la carpeta 'dist' lista para producciÃ³n.
[phases.build]
cmds = ["npm run build"]

# ğŸš€ 3ï¸âƒ£ Fase de ejecuciÃ³n
# Sirve la app estÃ¡tica generada por Vite en el puerto 3000.
[phases.start]
cmd = "npx serve -s dist -l 3000"

# ğŸ’“ 4ï¸âƒ£ Healthcheck
# Permite a Coolify detectar correctamente que la app estÃ¡ corriendo.
[healthcheck]
path = "/"
port = 3000
interval = "30s"
timeout = "10s"
retries = 3
start_period = "20s"

# ğŸŒ 5ï¸âƒ£ Variables de entorno
[variables]
NODE_ENV = "production"
PORT = "3000"
HOST = "0.0.0.0"

# ğŸ§° 6ï¸âƒ£ Dependencias extra (Ãºtil si Nixpacks no detecta node automÃ¡ticamente)
[build]
providers = ["node"]
